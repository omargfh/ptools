

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>&lt;no title&gt; &mdash; PTools 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=0c468a07" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            PTools
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#philosophy">Philosophy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#core-capabilities">Core Capabilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#file-system-data-operations">File System &amp; Data Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#ai-language-models">AI &amp; Language Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#development-tools">Development Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#data-processing-workflows">Data Processing &amp; Workflows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#configuration-security">Configuration &amp; Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#architecture-overview">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction.html#design-patterns">Design Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#decorator-based-configuration">Decorator-Based Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#modular-cli-structure">Modular CLI Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction.html#stream-processing">Stream Processing</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PTools</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">&lt;no title&gt;</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user-guide/data-processing.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p># Data Processing</p>
<p>The <cite>flow</cite> module provides a powerful, functional programming-inspired data processing pipeline system. It allows you to transform, filter, and manipulate data streams using Python expressions in a Unix-pipe style workflow.</p>
<p>## Core Concepts</p>
<p>### Stream Processing</p>
<p>Flow operates on data streams where each line of input becomes a <cite>StreamValue</cite> object that flows through processing stages:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">Input</span> <span class="pre">→</span> <span class="pre">Transform</span> <span class="pre">→</span> <span class="pre">Filter</span> <span class="pre">→</span> <span class="pre">Aggregate</span> <span class="pre">→</span> <span class="pre">Output</span>
<span class="pre">`</span></code></p>
<p>Each processing stage can:
- <strong>Transform</strong> data (map operations)
- <strong>Filter</strong> data (conditional operations)
- <strong>Aggregate</strong> data (reduce operations)
- <strong>Generate</strong> data (range, iteration)</p>
<p>### Data Flow Model</p>
<p><a href="#id1"><span class="problematic" id="id2">``</span></a><a href="#id3"><span class="problematic" id="id4">`</span></a>bash
# Basic pattern: input | transform | output
echo “hello world” | ptools flow map “x.upper()”</p>
<p># Multi-stage pipeline
cat data.txt | </p>
<blockquote>
<div><p>ptools flow map “x.strip()” | ptools flow filter “len(x) &gt; 0” | ptools flow map “x.split()[0]”</p>
</div></blockquote>
<p><a href="#id5"><span class="problematic" id="id6">``</span></a><a href="#id7"><span class="problematic" id="id8">`</span></a></p>
<p>## Basic Operations</p>
<p>### Map Operations</p>
<p>Transform each input item using a Python expression:</p>
<p><a href="#id9"><span class="problematic" id="id10">``</span></a><a href="#id11"><span class="problematic" id="id12">`</span></a>bash
# Convert to uppercase
echo -e “applenbananancherry” | ptools flow map “x.upper()”</p>
<p># Extract parts of strings
echo -e “name:johnnage:30” | ptools flow map “x.split(‘:’)[1]”</p>
<p># Mathematical operations
ptools flow range 1 10 | ptools flow map “x * x”</p>
<p># Complex transformations
echo ‘{“name”: “Alice”, “age”: 25}’ | ptools flow map “eval(x)[‘name’]”
<a href="#id13"><span class="problematic" id="id14">``</span></a><a href="#id15"><span class="problematic" id="id16">`</span></a></p>
<p>### Filter Operations</p>
<p>Keep only items that match a condition:</p>
<p><a href="#id17"><span class="problematic" id="id18">``</span></a><a href="#id19"><span class="problematic" id="id20">`</span></a>bash
# Filter by length
echo -e “anbbncccndddd” | ptools flow filter “len(x) &gt; 2”</p>
<p># Filter by content
cat log.txt | ptools flow filter “‘ERROR’ in x”</p>
<p># Numeric filters
ptools flow range 1 20 | ptools flow filter “x % 2 == 0”</p>
<p># Regex filters
ls | ptools flow filter “re.match(r’.*.py$’, x)”
<a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>### Reduce Operations</p>
<p>Aggregate data into a single result:</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a>bash
# Sum numbers
ptools flow range 1 10 | ptools flow reduce “acc + x” –initial 0</p>
<p># Concatenate strings
echo -e “hellonworld” | ptools flow reduce “acc + ‘ ‘ + x” –initial “”</p>
<p># Find maximum
echo -e “3n7n1n9n2” | ptools flow reduce “max(acc, int(x))” –initial 0</p>
<p># Complex aggregation
cat numbers.txt | ptools flow reduce “{‘sum’: acc[‘sum’] + int(x), ‘count’: acc[‘count’] + 1}” </p>
<blockquote>
<div><p>–initial “{‘sum’: 0, ‘count’: 0}”</p>
</div></blockquote>
<p><a href="#id29"><span class="problematic" id="id30">``</span></a><a href="#id31"><span class="problematic" id="id32">`</span></a></p>
<p>## Advanced Operations</p>
<p>### Range Generation</p>
<p>Generate sequences of numbers:</p>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a>bash
# Basic range
ptools flow range 1 10</p>
<p># With step
ptools flow range 0 100 10</p>
<p># Negative numbers
ptools flow range 10 -5 -2</p>
<p># Process generated ranges
ptools flow range 1 5 | ptools flow map “x ** 2”
<a href="#id37"><span class="problematic" id="id38">``</span></a><a href="#id39"><span class="problematic" id="id40">`</span></a></p>
<p>### Unique Operations</p>
<p>Remove duplicates from streams:</p>
<p><a href="#id41"><span class="problematic" id="id42">``</span></a><a href="#id43"><span class="problematic" id="id44">`</span></a>bash
# Basic deduplication
echo -e “applenbanananapplencherrynbanana” | ptools flow unique</p>
<p># Case-insensitive unique
cat names.txt | ptools flow map “x.lower()” | ptools flow unique</p>
<p># Unique by transformation
cat emails.txt | ptools flow unique “x.split(‘&#64;’)[1]”  # Unique domains
<a href="#id45"><span class="problematic" id="id46">``</span></a><a href="#id47"><span class="problematic" id="id48">`</span></a></p>
<p>### Grouping Operations</p>
<p>Group items by a key expression:</p>
<p><a href="#id49"><span class="problematic" id="id50">``</span></a><a href="#id51"><span class="problematic" id="id52">`</span></a>bash
# Group by length
echo -e “catndognbirdnelephant” | ptools flow group “len(x)”</p>
<p># Group by first character
cat words.txt | ptools flow group “x[0].lower()”</p>
<p># Group by file extension
ls | ptools flow group “x.split(‘.’)[-1] if ‘.’ in x else ‘no-ext’”</p>
<p># Group with complex keys
cat logs.txt | ptools flow group “x.split()[0]”  # Group by first word
<a href="#id53"><span class="problematic" id="id54">``</span></a><a href="#id55"><span class="problematic" id="id56">`</span></a></p>
<p>### Foreach Operations</p>
<p>Generate multiple outputs for each input:</p>
<p><a href="#id57"><span class="problematic" id="id58">``</span></a><a href="#id59"><span class="problematic" id="id60">`</span></a>bash
# Split strings into words
echo “hello world test” | ptools flow foreach “x.split()”</p>
<p># Generate character sequences
echo “abc” | ptools flow foreach “list(x)”</p>
<p># Process file lines
echo “file1.txt” | ptools flow foreach “open(x).readlines()”</p>
<p># Mathematical sequences
echo “5” | ptools flow foreach “range(int(x))”
<a href="#id61"><span class="problematic" id="id62">``</span></a><a href="#id63"><span class="problematic" id="id64">`</span></a></p>
<p>### While Loops</p>
<p>Execute loops with conditions:</p>
<p><a href="#id65"><span class="problematic" id="id66">``</span></a><a href="#id67"><span class="problematic" id="id68">`</span></a>bash
# Simple counting
ptools flow while “x + 1” –initial 0 –condition “x &lt; 10”</p>
<p># Fibonacci sequence
ptools flow while “[x[1], x[0] + x[1]]” –initial “[0, 1]” </p>
<blockquote>
<div><p>–condition “x[1] &lt; 100” –output-all</p>
</div></blockquote>
<p># Collatz sequence
echo “7” | ptools flow while “x // 2 if x % 2 == 0 else 3 * x + 1” </p>
<blockquote>
<div><p>–condition “x != 1” –output-all</p>
</div></blockquote>
<p><a href="#id69"><span class="problematic" id="id70">``</span></a><a href="#id71"><span class="problematic" id="id72">`</span></a></p>
<p>## Output Formats</p>
<p>### JSON Output</p>
<p>Format output as JSON:</p>
<p><a href="#id73"><span class="problematic" id="id74">``</span></a><a href="#id75"><span class="problematic" id="id76">`</span></a>bash
# Simple JSON array
echo -e “applenbanana” | ptools flow map “x” –flavor json</p>
<p># JSON objects
ptools flow range 1 5 | </p>
<blockquote>
<div><p>ptools flow map “{‘number’: x, ‘square’: x*x}” –flavor json</p>
</div></blockquote>
<p># Grouped data as JSON
cat data.txt | ptools flow group “x[0]” –flavor json
<a href="#id77"><span class="problematic" id="id78">``</span></a><a href="#id79"><span class="problematic" id="id80">`</span></a></p>
<p>### Custom Output Formatting</p>
<p><a href="#id81"><span class="problematic" id="id82">``</span></a><a href="#id83"><span class="problematic" id="id84">`</span></a>bash
# Tab-separated values
cat data.txt | ptools flow map “x.replace(‘,’, ‘t’)”</p>
<p># CSV-like output
ptools flow range 1 5 | ptools flow map “f’{x},{x*x},{x**3}’”</p>
<p># Formatted strings
cat names.txt | ptools flow map “f’Hello, {x}!’”
<a href="#id85"><span class="problematic" id="id86">``</span></a><a href="#id87"><span class="problematic" id="id88">`</span></a></p>
<p>## Built-in Functions and Utilities</p>
<p>Flow expressions have access to a rich set of built-in functions:</p>
<p>### String Operations</p>
<p><a href="#id89"><span class="problematic" id="id90">``</span></a><a href="#id91"><span class="problematic" id="id92">`</span></a>bash
# String manipulation
echo “Hello World” | ptools flow map “to_upper(x)”
echo “Hello World” | ptools flow map “to_lower(x)”</p>
<p># JSON operations
echo ‘{“key”: “value”}’ | ptools flow map “from_json(x)[‘key’]”
ptools flow map “to_json({‘name’: x})”
<a href="#id93"><span class="problematic" id="id94">``</span></a><a href="#id95"><span class="problematic" id="id96">`</span></a></p>
<p>### Mathematical Functions</p>
<p><a href="#id97"><span class="problematic" id="id98">``</span></a><a href="#id99"><span class="problematic" id="id100">`</span></a>bash
# Basic math
ptools flow range 1 10 | ptools flow map “sqrt(x)”
ptools flow range 1 10 | ptools flow map “round_value(x / 3, 2)”</p>
<p># Statistics
echo -e “1n2n3n4n5” | ptools flow reduce “mean([acc] + [int(x)])” –initial 0
<a href="#id101"><span class="problematic" id="id102">``</span></a><a href="#id103"><span class="problematic" id="id104">`</span></a></p>
<p>### Regular Expressions</p>
<p><a href="#id105"><span class="problematic" id="id106">``</span></a><a href="#id107"><span class="problematic" id="id108">`</span></a>bash
# Pattern matching
cat file.txt | ptools flow filter “regex_match(r’^d+’, x)”
cat file.txt | ptools flow filter “regex_search(r’error|warning’, x)”</p>
<p># Extract patterns
cat logs.txt | ptools flow map “re.search(r’d{4}-d{2}-d{2}’, x).group() if re.search(r’d{4}-d{2}-d{2}’, x) else None”
<a href="#id109"><span class="problematic" id="id110">``</span></a><a href="#id111"><span class="problematic" id="id112">`</span></a></p>
<p>### Date and Time</p>
<p><a href="#id113"><span class="problematic" id="id114">``</span></a><a href="#id115"><span class="problematic" id="id116">`</span></a>bash
# Current time
ptools flow map “current_time()”</p>
<p># Date processing (requires datetime module)
echo “2023-01-01” | ptools flow map “datetime.datetime.fromisoformat(x).strftime(‘%B %d, %Y’)”
<a href="#id117"><span class="problematic" id="id118">``</span></a><a href="#id119"><span class="problematic" id="id120">`</span></a></p>
<p>### System Operations</p>
<p><a href="#id121"><span class="problematic" id="id122">``</span></a><a href="#id123"><span class="problematic" id="id124">`</span></a>bash
# Execute commands
echo “ls -la” | ptools flow map “exec(x)”</p>
<p># Environment variables
ptools flow map “os.environ.get(‘HOME’)”</p>
<p># File operations
ptools flow map “os.path.exists(x)”
<a href="#id125"><span class="problematic" id="id126">``</span></a><a href="#id127"><span class="problematic" id="id128">`</span></a></p>
<p>## Real-World Examples</p>
<p>### Log Analysis</p>
<p><a href="#id129"><span class="problematic" id="id130">``</span></a><a href="#id131"><span class="problematic" id="id132">`</span></a>bash
# Parse Apache access logs
cat access.log | </p>
<blockquote>
<div><p>ptools flow filter “‘GET’ in x” | ptools flow map “x.split()[0]” | ptools flow unique | ptools flow –flavor json</p>
</div></blockquote>
<p># Error log analysis
cat error.log | </p>
<blockquote>
<div><p>ptools flow filter “‘ERROR’ in x” | ptools flow map “x.split()[0]” | ptools flow group “x” | ptools flow –flavor json</p>
</div></blockquote>
<p><a href="#id133"><span class="problematic" id="id134">``</span></a><a href="#id135"><span class="problematic" id="id136">`</span></a></p>
<p>### Data Transformation</p>
<p><a href="#id137"><span class="problematic" id="id138">``</span></a><a href="#id139"><span class="problematic" id="id140">`</span></a>bash
# CSV to JSON conversion
cat data.csv | </p>
<blockquote>
<div><p>ptools flow map “x.split(‘,’)” | ptools flow map “{‘name’: x[0], ‘age’: int(x[1]), ‘city’: x[2]}” | ptools flow –flavor json</p>
</div></blockquote>
<p># File listing with metadata
ls -la | tail -n +2 | </p>
<blockquote>
<div><p>ptools flow map “x.split()” | ptools flow filter “len(x) &gt;= 9” | ptools flow map “{‘name’: x[-1], ‘size’: int(x[4]), ‘date’: ‘ ‘.join(x[5:8])}” | ptools flow –flavor json</p>
</div></blockquote>
<p><a href="#id141"><span class="problematic" id="id142">``</span></a><a href="#id143"><span class="problematic" id="id144">`</span></a></p>
<p>### Text Processing</p>
<p><a href="#id145"><span class="problematic" id="id146">``</span></a><a href="#id147"><span class="problematic" id="id148">`</span></a>bash
# Word frequency analysis
cat document.txt | </p>
<blockquote>
<div><p>ptools flow foreach “x.lower().split()” | ptools flow filter “x.isalpha()” | ptools flow group “x” | ptools flow map “{‘word’: group_key, ‘count’: len(group)}” | ptools flow –flavor json</p>
</div></blockquote>
<p># Extract email addresses
cat text_file.txt | </p>
<blockquote>
<div><p>ptools flow filter “regex_search(r’[a-zA-Z0-9._%+-]+&#64;[a-zA-Z0-9.-]+.[a-zA-Z]{2,}’, x)” | ptools flow map “re.search(r’[a-zA-Z0-9._%+-]+&#64;[a-zA-Z0-9.-]+.[a-zA-Z]{2,}’, x).group()”</p>
</div></blockquote>
<p><a href="#id149"><span class="problematic" id="id150">``</span></a><a href="#id151"><span class="problematic" id="id152">`</span></a></p>
<p>### Mathematical Computations</p>
<p><a href="#id153"><span class="problematic" id="id154">``</span></a><a href="#id155"><span class="problematic" id="id156">`</span></a>bash
# Statistical analysis
ptools flow range 1 100 | </p>
<blockquote>
<div><p>ptools flow reduce “{‘sum’: acc.get(‘sum’, 0) + x, ‘count’: acc.get(‘count’, 0) + 1, ‘squares’: acc.get(‘squares’, 0) + x*x}” | ptools flow map “{‘mean’: x[‘sum’]/x[‘count’], ‘variance’: x[‘squares’]/x[‘count’] - (x[‘sum’]/x[‘count’])**2}”</p>
</div></blockquote>
<p># Generate multiplication table
ptools flow range 1 11 | </p>
<blockquote>
<div><p>ptools flow foreach “[(i, x, i*x) for i in range(1, 11)]” | ptools flow map “f’{x[0]} x {x[1]} = {x[2]}’”</p>
</div></blockquote>
<p><a href="#id157"><span class="problematic" id="id158">``</span></a><a href="#id159"><span class="problematic" id="id160">`</span></a></p>
<p>## Integration with Other Modules</p>
<p>### Flow + AI</p>
<p><a href="#id161"><span class="problematic" id="id162">``</span></a><a href="#id163"><span class="problematic" id="id164">`</span></a>bash
# Process AI responses
ptools llm “List 10 programming languages” | </p>
<blockquote>
<div><p>ptools flow map “x.strip()” | ptools flow filter “x and not x.startswith(‘#’)” | ptools flow unique</p>
</div></blockquote>
<p># Generate and process data
ptools llm “Generate 5 JSON objects with name and age” | </p>
<blockquote>
<div><p>ptools flow filter “x.startswith(‘{‘)” | ptools flow map “from_json(x)”</p>
</div></blockquote>
<p><a href="#id165"><span class="problematic" id="id166">``</span></a><a href="#id167"><span class="problematic" id="id168">`</span></a></p>
<p>### Flow + File Operations</p>
<p><a href="#id169"><span class="problematic" id="id170">``</span></a><a href="#id171"><span class="problematic" id="id172">`</span></a>bash
# Process file listings
ptools fs walkdir –regex “.py$” | </p>
<blockquote>
<div><p>ptools flow map “x.split(‘/’)[-1]” | ptools flow group “x.split(‘.’)[0]”</p>
</div></blockquote>
<p># Analyze file sizes
ptools fs walkdir –files | </p>
<blockquote>
<div><p>ptools flow map “{‘file’: x, ‘size’: os.path.getsize(x)}” | ptools flow filter “x[‘size’] &gt; 1000000”</p>
</div></blockquote>
<p><a href="#id173"><span class="problematic" id="id174">``</span></a><a href="#id175"><span class="problematic" id="id176">`</span></a></p>
<p>### Flow + JSON</p>
<p><a href="#id177"><span class="problematic" id="id178">``</span></a><a href="#id179"><span class="problematic" id="id180">`</span></a>bash
# Process JSON data
cat data.json | ptools json format | </p>
<blockquote>
<div><p>ptools flow map “from_json(x)” | ptools flow map “x.get(‘important_field’)” | ptools flow filter “x is not None”</p>
</div></blockquote>
<p><a href="#id181"><span class="problematic" id="id182">``</span></a><a href="#id183"><span class="problematic" id="id184">`</span></a></p>
<p>## Best Practices</p>
<p>### Expression Design</p>
<ol class="arabic">
<li><p><strong>Keep expressions simple</strong>:
<a href="#id185"><span class="problematic" id="id186">``</span></a><a href="#id187"><span class="problematic" id="id188">`</span></a>bash
# Good: Simple, readable
ptools flow map “x.upper()”</p>
<p># Avoid: Complex nested operations
ptools flow map “{‘result’: [y.strip().upper() for y in x.split(‘,’) if len(y.strip()) &gt; 0]}”
<a href="#id189"><span class="problematic" id="id190">``</span></a><a href="#id191"><span class="problematic" id="id192">`</span></a></p>
</li>
<li><p><strong>Use intermediate steps</strong>:
<a href="#id193"><span class="problematic" id="id194">``</span></a><a href="#id195"><span class="problematic" id="id196">`</span></a>bash
# Better: Break into steps
cat data.txt | </p>
<blockquote>
<div><p>ptools flow map “x.split(‘,’)” | ptools flow foreach “x” | ptools flow map “x.strip()” | ptools flow filter “len(x) &gt; 0” | ptools flow map “x.upper()”</p>
</div></blockquote>
<p><a href="#id197"><span class="problematic" id="id198">``</span></a><a href="#id199"><span class="problematic" id="id200">`</span></a></p>
</li>
<li><p><strong>Handle errors gracefully</strong>:
<code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">#</span> <span class="pre">Use</span> <span class="pre">conditional</span> <span class="pre">expressions</span> <span class="pre">for</span> <span class="pre">safety</span>
<span class="pre">ptools</span> <span class="pre">flow</span> <span class="pre">map</span> <span class="pre">&quot;int(x)</span> <span class="pre">if</span> <span class="pre">x.isdigit()</span> <span class="pre">else</span> <span class="pre">0&quot;</span>
<span class="pre">ptools</span> <span class="pre">flow</span> <span class="pre">map</span> <span class="pre">&quot;x.get('key',</span> <span class="pre">'default')</span> <span class="pre">if</span> <span class="pre">isinstance(x,</span> <span class="pre">dict)</span> <span class="pre">else</span> <span class="pre">x&quot;</span>
<span class="pre">`</span></code></p></li>
</ol>
<p>### Performance Optimization</p>
<ol class="arabic">
<li><p><strong>Filter early</strong>:
<a href="#id201"><span class="problematic" id="id202">``</span></a><a href="#id203"><span class="problematic" id="id204">`</span></a>bash
# Good: Filter first, then process
cat large_file.txt | </p>
<blockquote>
<div><p>ptools flow filter “‘ERROR’ in x” | ptools flow map “parse_error_line(x)”</p>
</div></blockquote>
<p><a href="#id205"><span class="problematic" id="id206">``</span></a><a href="#id207"><span class="problematic" id="id208">`</span></a></p>
</li>
<li><p><strong>Use appropriate data structures</strong>:
<code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">#</span> <span class="pre">For</span> <span class="pre">unique</span> <span class="pre">operations,</span> <span class="pre">filtering</span> <span class="pre">is</span> <span class="pre">more</span> <span class="pre">efficient</span> <span class="pre">than</span> <span class="pre">grouping</span>
<span class="pre">cat</span> <span class="pre">data.txt</span> <span class="pre">|</span> <span class="pre">ptools</span> <span class="pre">flow</span> <span class="pre">unique</span>&#160; <span class="pre">#</span> <span class="pre">vs</span> <span class="pre">grouping</span> <span class="pre">and</span> <span class="pre">extracting</span> <span class="pre">keys</span>
<span class="pre">`</span></code></p></li>
<li><p><strong>Avoid expensive operations in filters</strong>:
<a href="#id209"><span class="problematic" id="id210">``</span></a><a href="#id211"><span class="problematic" id="id212">`</span></a>bash
# Expensive: regex in filter
ptools flow filter “re.match(r’complex.*pattern’, x)”</p>
<p># Better: simple filter first
ptools flow filter “‘keyword’ in x” | ptools flow filter “re.match(r’complex.*pattern’, x)”
<a href="#id213"><span class="problematic" id="id214">``</span></a><a href="#id215"><span class="problematic" id="id216">`</span></a></p>
</li>
</ol>
<p>### Debugging and Development</p>
<ol class="arabic">
<li><p><strong>Use debug mode</strong>:
<code class="docutils literal notranslate"><span class="pre">`bash</span>
<span class="pre">ptools</span> <span class="pre">flow</span> <span class="pre">map</span> <span class="pre">&quot;x.upper()&quot;</span> <span class="pre">--debug</span>
<span class="pre">`</span></code></p></li>
<li><p><strong>Test expressions incrementally</strong>:
<a href="#id217"><span class="problematic" id="id218">``</span></a><a href="#id219"><span class="problematic" id="id220">`</span></a>bash
# Start simple
echo “test” | ptools flow map “x”</p>
<p># Add complexity step by step
echo “test” | ptools flow map “x.upper()”
echo “test” | ptools flow map “x.upper()[:2]”
<a href="#id221"><span class="problematic" id="id222">``</span></a><a href="#id223"><span class="problematic" id="id224">`</span></a></p>
</li>
<li><p><strong>Use intermediate outputs</strong>:
<a href="#id225"><span class="problematic" id="id226">``</span></a><a href="#id227"><span class="problematic" id="id228">`</span></a>bash
# Save intermediate results for inspection
cat data.txt | </p>
<blockquote>
<div><p>ptools flow map “x.strip()” &gt; step1.txt</p>
</div></blockquote>
<dl class="simple">
<dt>cat step1.txt | </dt><dd><p>ptools flow filter “len(x) &gt; 0” &gt; step2.txt</p>
</dd>
</dl>
<p><a href="#id229"><span class="problematic" id="id230">``</span></a><a href="#id231"><span class="problematic" id="id232">`</span></a></p>
</li>
</ol>
<p>## Troubleshooting</p>
<p>### Common Errors</p>
<ol class="arabic">
<li><p><strong>Syntax Errors</strong>:
<a href="#id233"><span class="problematic" id="id234">``</span></a><a href="#id235"><span class="problematic" id="id236">`</span></a>bash
# Error: Invalid Python syntax
ptools flow map “x.upper(”  # Missing closing parenthesis</p>
<p># Solution: Check expression syntax
python3 -c “x=’test’; print(x.upper())”  # Test outside flow
<a href="#id237"><span class="problematic" id="id238">``</span></a><a href="#id239"><span class="problematic" id="id240">`</span></a></p>
</li>
<li><p><strong>Name Errors</strong>:
<a href="#id241"><span class="problematic" id="id242">``</span></a><a href="#id243"><span class="problematic" id="id244">`</span></a>bash
# Error: undefined variable
ptools flow map “y.upper()”  # ‘y’ not defined, should be ‘x’</p>
<p># Solution: Use ‘x’ for current item
ptools flow map “x.upper()”
<a href="#id245"><span class="problematic" id="id246">``</span></a><a href="#id247"><span class="problematic" id="id248">`</span></a></p>
</li>
<li><p><strong>Type Errors</strong>:
<a href="#id249"><span class="problematic" id="id250">``</span></a><a href="#id251"><span class="problematic" id="id252">`</span></a>bash
# Error: calling method on wrong type
ptools flow map “int(x).upper()”  # int has no upper() method</p>
<p># Solution: Check types and conversions
ptools flow map “str(int(x)).upper()”
<a href="#id253"><span class="problematic" id="id254">``</span></a><a href="#id255"><span class="problematic" id="id256">`</span></a></p>
</li>
</ol>
<p>### Performance Issues</p>
<ol class="arabic simple">
<li><p><strong>Slow processing</strong>:
- Use <cite>–debug</cite> to see timing information
- Profile expensive operations
- Consider breaking complex expressions into steps</p></li>
<li><p><strong>Memory usage</strong>:
- Flow processes streams, not entire datasets
- Large intermediate objects can cause issues
- Use generators where possible in expressions</p></li>
<li><p><strong>CPU usage</strong>:
- Avoid complex regex in tight loops
- Use built-in functions when available
- Consider parallelization for independent operations</p></li>
</ol>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Omar Ibrahim.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>